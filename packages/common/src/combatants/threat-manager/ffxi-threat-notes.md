FFXI Threat from https://kanican.livejournal.com/13235.html

Basic Concepts

- Action enmity has a decaying (Cumulative Enmity, hereafter 'CE') and
  non-decaying component (Volatile Enmity - 'VE')
- Enmity is capped at 10000 VE and 10000 CE
- The maximum enmity any player can reach is 20,000 Total Enmity 'TE' - 10,000 CE and 10,000 VE.

Gaining Enmity

- All actions generate at least 1 CE
- Provoke generates 1800 VE and 1 CE
- The enmity generated by cure is CE = CEModifier x HPCured where CE Modifier is
  based on the level of the target being cured, where lower level targets have a higher modifier.
  Ex. on a level 1 target the modifiers are: CE 3.636 VE: 21.82 and on a level 75 are CE: 0.727 VE: 4.36
  or seemingly the VE modifier is 6x the CE modifier
  Lv....CE......VE
  1.....3.636...21.82
  75....0.727...4.36
- The enmity generated by damage behaves similarly to that of cure, but the CE and VE modifiers are at
  about a 1:3 ratio CE:VE, rather than the 1:6 ratio of cures although base values are higher:
  Lv....CE......VE
  1 ....13.333..40.00
  75....1.538...4.62

Losing Enmity

- The Volatile Enmity Decay Rate is -60 VE per second for all actions
- Absorbing a hit with Utsusemi reduces enmity by 25
- Enmity lost from taking damage is CE only and follows the formula:
  CELoss = 1800 x DamageTaken / TargetMaxHP
- Getting hit with enfeebling magic lowers your CE by 80
- Your CE will reset if a mob tries to target you and finds you unavailable

Enmity Gear

- Enmity Gear grants a direct percentage modification on Cumulative Enmity of actions.
- Enmity Gear does not affect the VE Hate Decay Rate in any fashion.
- Enmity Gear increases the VE of an ability in the same fashion as it affects CE - direct % increase.

Other notes:

- The current HP % of the target of the cure does not affect the amount of CE gained.
- The maximum HP of the target of the cure does not affect the amount of CE gained.
- The rate of VE decay is not related to the current total VE of a player.
- It is possible to have the highest TE of any player, yet not be the mob's target.
- The "Hate List" is not simply a list of players and their TE - it is separate from the TE counter.
- A mob chooses targets based on who has the highest TE of the players on the hate list.

Thoughts

- The scaling for damage being based on the targets level:
    - Makes sense philosophically because a high level monster would look at some
      damage and think "that isn't that much" damage, whereas a low level monster
      would be more concerned with lower damage numbers.
    - Could be to keep consistancy with the flat threat values of other actions which
      have no scaling applied.
    - Is also probably linked to the fact that volatile enmity decay is constant
      and if high damage numbers at high level play were added flatly, the enmity decay
      would eventually be such a low percentage of the generated enmity that it would
      become meaningless.
- Monsters dealing damage to targets reducing threat based on the damage value's percent
  of the target's max hp:
    - Philosophically makes sense because the monster's effective retaliation
      is proportional to the target's strength. Strategically this is not smart for the monster,
      who would be realistically targeting the lowest HP targets with the highest damage, but that
      is not what a traditional threat system is simulating.
    - Functionally forgives squishy targets that pull aggro once they are
      hit.
    - Means that tanks must continue to fight for threat
    - Means that having a larger hp pool and better mitigation improves tank's ability to retain threat.
